<div class="test-container" *ngIf="showTestPage; else normalLayout">
  <h1>üîß Phase 2: Core Infrastructure Test</h1>
  
  <div class="test-section">
    <h2>Authentication Service Test</h2>
    
    <div class="auth-buttons">
      <button mat-raised-button color="primary" (click)="mockAdminLogin()">
        <mat-icon>admin_panel_settings</mat-icon>
        Login as Admin
      </button>
      
      <button mat-raised-button color="accent" (click)="mockUserLogin()">
        <mat-icon>person</mat-icon>
        Login as User
      </button>
      
      <button mat-raised-button color="warn" (click)="logout()" [disabled]="!isAuthenticated">
        <mat-icon>logout</mat-icon>
        Logout
      </button>
    </div>
    
    <div class="auth-status">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Authentication Status</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>Is Authenticated: <strong>{{ isAuthenticated ? '‚úÖ Yes' : '‚ùå No' }}</strong></p>
          <p>User Role: <strong>{{ currentUser?.role || 'None' }}</strong></p>
          <p>Username: <strong>{{ currentUser?.username || 'None' }}</strong></p>
          <p>Email: <strong>{{ currentUser?.email || 'None' }}</strong></p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
  
  <div class="test-section">
    <h2>API Service Test</h2>
    
    <div class="api-buttons">
      <button mat-raised-button (click)="testGetRequest()" [disabled]="!isAuthenticated">
        <mat-icon>cloud_download</mat-icon>
        Test GET Request
      </button>
      
      <button mat-raised-button (click)="testPostRequest()" [disabled]="!isAuthenticated">
        <mat-icon>cloud_upload</mat-icon>
        Test POST Request
      </button>
      
      <button mat-raised-button color="warn" (click)="testErrorRequest()">
        <mat-icon>error</mat-icon>
        Test Error Response
      </button>
    </div>
    
    <div class="api-results">
      <mat-card>
        <mat-card-header>
          <mat-card-title>API Response</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <pre>{{ apiResponse | json }}</pre>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
  
  <div class="navigation-section">
    <h2>Ready to Continue?</h2>
    <p>All core infrastructure is now set up. You can:</p>
    
    <div class="nav-buttons">
      <button mat-raised-button color="primary" (click)="continueToApp()">
        <mat-icon>dashboard</mat-icon>
        Go to Dashboard
      </button>
      
      <button mat-stroked-button routerLink="/auth/login">
        <mat-icon>login</mat-icon>
        Test Login Page
      </button>
      
      <button mat-stroked-button routerLink="/admin">
        <mat-icon>admin_panel_settings</mat-icon>
        Test Admin Guard
      </button>
    </div>
  </div>
</div>

<ng-template #normalLayout>
  <app-header></app-header>

<main class="main-content">
  <!-- Test Navigation for Development -->
  <div class="dev-nav" *ngIf="showTestNav">
    <mat-card class="dev-nav-card">
      <mat-card-header>
        <mat-card-title>üöÄ Project Navigation</mat-card-title>
        <mat-card-subtitle>Development Testing</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="nav-buttons">
          <button mat-raised-button color="primary" routerLink="/crud/products">
            <mat-icon>inventory</mat-icon>
            CRUD Module
          </button>
          
          <button mat-raised-button color="accent" routerLink="/dashboard">
            <mat-icon>dashboard</mat-icon>
            Dashboard
          </button>
          
          <button mat-raised-button color="warn" routerLink="/admin">
            <mat-icon>admin_panel_settings</mat-icon>
            Admin Panel
          </button>
          
          <button mat-stroked-button routerLink="/auth/login">
            <mat-icon>login</mat-icon>
            Auth Module
          </button>
        </div>
        
        <p class="nav-hint">Use the navigation above to test different modules. The CRUD module is the main requirement.</p>
      </mat-card-content>
    </mat-card>
  </div>
  
  <router-outlet></router-outlet>
</main>

<app-footer></app-footer>
</ng-template>