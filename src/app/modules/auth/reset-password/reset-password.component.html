<div class="reset-password-container">
  <div class="back-button">
    <button mat-icon-button routerLink="/auth/login">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>

  <div class="reset-password-header">
    <mat-icon class="header-icon">lock_open</mat-icon>
    <h1>Reset Password</h1>
    <p>Create a new password for your account.</p>
  </div>

  <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="reset-password-form">
    <!-- Password -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>New Password</mat-label>
      <mat-icon matPrefix>lock</mat-icon>
      <input matInput [type]="hidePassword ? 'password' : 'text'" 
             formControlName="password" placeholder="Enter new password">
      
      <button mat-icon-button matSuffix type="button" 
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'Hide password'">
        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      
      <mat-hint>Minimum 8 characters with letters and numbers</mat-hint>
      <mat-error *ngIf="resetForm.get('password')?.hasError('required')">
        Password is required
      </mat-error>
      <mat-error *ngIf="resetForm.get('password')?.hasError('minlength')">
        Password must be at least 8 characters
      </mat-error>
      <mat-error *ngIf="resetForm.get('password')?.hasError('pattern')">
        Password must contain letters and numbers
      </mat-error>
    </mat-form-field>

    <!-- Confirm Password -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Confirm New Password</mat-label>
      <mat-icon matPrefix>lock_reset</mat-icon>
      <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" 
             formControlName="confirmPassword" placeholder="Confirm new password">
      
      <button mat-icon-button matSuffix type="button" 
              (click)="hideConfirmPassword = !hideConfirmPassword"
              [attr.aria-label]="'Hide password'">
        <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      
      <mat-error *ngIf="resetForm.hasError('passwordMismatch')">
        Passwords do not match
      </mat-error>
    </mat-form-field>

    <!-- Submit Button -->
    <button mat-raised-button color="primary" type="submit" class="submit-button" 
            [disabled]="resetForm.invalid || isLoading">
      <span *ngIf="!isLoading">
        <mat-icon>lock_reset</mat-icon>
        Reset Password
      </span>
      <span *ngIf="isLoading">
        <mat-spinner diameter="20" class="button-spinner"></mat-spinner>
        Resetting...
      </span>
    </button>

    <!-- Back to Login -->
    <div class="back-to-login">
      <a routerLink="/auth/login">
        <mat-icon>arrow_back</mat-icon>
        Back to Login
      </a>
    </div>
  </form>

  <!-- Success/Error Messages -->
  <div *ngIf="successMessage" class="success-alert">
    <mat-icon class="success-icon">check_circle</mat-icon>
    <div>
      <strong>Password Reset Successful!</strong>
      <p>{{ successMessage }}</p>
      <button mat-stroked-button color="primary" (click)="goToLogin()" class="login-button">
        <mat-icon>login</mat-icon>
        Go to Login
      </button>
    </div>
  </div>

  <div *ngIf="errorMessage" class="error-alert">
    <mat-icon class="error-icon">error</mat-icon>
    <span>{{ errorMessage }}</span>
  </div>
</div>